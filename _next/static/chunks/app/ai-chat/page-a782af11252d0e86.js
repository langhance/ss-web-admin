(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{65007:function(e,t,r){Promise.resolve().then(r.bind(r,45905))},45905:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return y}});var s=r(57437),n=r(89733),a=r(44541),i=r(55555),l=r(77209),c=r(70402),o=r(47304),d=r(4919),u=r(78068),f=r(66508);class x{async getAllScenes(){let e=(await (0,f.k)().get("/admin/v1/ai-chat/scenes")).data;if("success"!==e.status){console.error("Get scenes failed");return}return e.data}async getSceneById(e){let t=(await (0,f.k)().get("/admin/v1/ai-chat/scene",{params:{id:e}})).data;if("success"!==t.status){console.error("Get scene failed");return}return t.data}async createScene(e){let t={...e,id:void 0};return 200===(await (0,f.k)().post("/admin/v1/ai-chat/scene",t)).status||(console.error("Create scene failed"),!1)}async deleteScene(e){return 200===(await (0,f.k)().delete("/admin/v1/ai-chat/scene",{params:{id:e}})).status||(console.error("Delete scene failed"),!1)}async updateScene(e){return 200===(await (0,f.k)().put("/admin/v1/ai-chat/scene",e)).status||(console.error("Update scene failed"),!1)}}var m=r(39099);let p=new x,h=(0,m.Ue)(e=>({scenes:void 0,refreshScenes:async()=>{let t=await p.getAllScenes();t&&e({scenes:t})},getSceneById:async e=>await p.getSceneById(e),createScene:async e=>await p.createScene(e),deleteScene:async e=>await p.deleteScene(e),updateScene:async e=>await p.updateScene(e)}));var v=r(85212),g=r(2265);function b(e){let{onClick:t=()=>{}}=e,r=h(e=>e.scenes),a=h(e=>e.refreshScenes),i=h(e=>e.deleteScene),l=e=>{i(e).then(e=>{e&&a()})};return(0,g.useEffect)(()=>{r||a()},[]),(0,s.jsx)("div",{className:"flex flex-col w-full h-full",children:(0,s.jsxs)(o.iA,{children:[(0,s.jsx)(o.xD,{children:(0,s.jsxs)(o.SC,{children:[(0,s.jsx)(o.ss,{children:"ID"}),(0,s.jsx)(o.ss,{children:"title"}),(0,s.jsx)(o.ss,{children:"desc"}),(0,s.jsx)(o.ss,{children:"thumbnail"}),(0,s.jsx)(o.ss,{children:"vip"})]})}),(0,s.jsx)(o.RM,{children:null==r?void 0:r.map(e=>(0,s.jsxs)(o.SC,{onClick:()=>t(e.id),children:[(0,s.jsx)(o.pj,{children:e.id}),(0,s.jsx)(o.pj,{children:e.title}),(0,s.jsx)(o.pj,{children:e.description}),(0,s.jsx)(o.pj,{children:e.thumbnailUrl&&(0,s.jsx)("img",{src:e.thumbnailUrl,alt:"thumbnail",className:"w-[50px] h-[90px] object-cover"})}),(0,s.jsx)(o.pj,{children:e.isVip?"Yes":"No"}),(0,s.jsx)(o.pj,{children:(0,s.jsx)(n.z,{onClick:t=>{t.stopPropagation(),l(e.id)},children:"Delete"})})]},e.id))})]})})}function j(e){var t,r;let{sceneId:o,visible:f=!1,onClose:x=()=>{}}=e,m=h(e=>e.refreshScenes),p=h(e=>e.updateScene),b=h(e=>e.createScene),j={id:0,languageId:1,title:"",description:void 0,difficultPercentLevel:void 0,thumbnailUrl:void 0,systemPrompt:void 0,isVip:void 0,maxExchangeNumber:void 0},[y,N]=(0,g.useState)(null),w=h(e=>e.getSceneById),{toast:S}=(0,u.pm)(),[T,C]=(0,g.useState)([]),k=()=>{N(null),C([])};return(0,g.useEffect)(()=>{o?w(o).then(e=>{if(e){var t;N(e),C((null!==(t=e.targets)&&void 0!==t?t:[]).map(e=>({text:e})))}}):(k(),N({...j}))},[o]),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(i.dy,{open:f,onClose:x,dismissible:!1,children:(0,s.jsxs)(i.sc,{className:"h-full",children:[(0,s.jsxs)(i.OX,{children:[(0,s.jsxs)(i.iI,{children:["You're ",o?"Updating AI-Chat":"Creating a new AI-Chat"," ","Scene ",o&&"with id ".concat(o)]}),(0,s.jsx)(i.u6,{children:"You can update the scene here"})]}),(0,s.jsxs)("div",{className:"flex flex-col overflow-auto space-y-2 mt-2 px-4 flex-1",children:[(0,s.jsxs)("div",{className:"flex flex-row items-center justify-start space-x-2 pl-2 mt-4",children:[(0,s.jsx)(c._,{children:"Title"}),(0,s.jsx)(l.I,{type:"text",value:null==y?void 0:y.title,onChange:e=>{y&&N({...y,title:e.target.value})}})]}),(0,s.jsxs)("div",{className:"flex flex-row items-center justify-start space-x-2 ml-2",children:[(0,s.jsx)(c._,{children:"Description"}),(0,s.jsx)(l.I,{type:"text",value:null==y?void 0:y.description,onChange:e=>{y&&N({...y,description:e.target.value})}})]}),(0,s.jsxs)("div",{className:"flex flex-row items-center justify-start space-x-2 ml-2",children:[(0,s.jsx)(c._,{children:"Thumbnail"}),(0,s.jsx)(l.I,{type:"text",value:null==y?void 0:y.thumbnailUrl,onChange:e=>{y&&N({...y,thumbnailUrl:e.target.value})}})]}),(0,s.jsx)(d.g,{className:"h-[200px] px-4 py-2",value:null==y?void 0:y.systemPrompt,onChange:e=>{y&&N({...y,systemPrompt:e.target.value})}}),(0,s.jsx)("div",{className:"h-10"}),(0,s.jsxs)("div",{className:"flex flex-row items-center justify-start",children:[(0,s.jsx)(c._,{children:"Difficult percent level"}),(0,s.jsx)(l.I,{type:"number",value:null!==(t=null==y?void 0:y.difficultPercentLevel)&&void 0!==t?t:0,onChange:e=>{y&&N({...y,difficultPercentLevel:parseFloat(e.target.value)})}})]}),(0,s.jsxs)("div",{className:"flex flex-row items-center justify-start",children:[(0,s.jsx)(c._,{children:"Max Exchange Number"}),(0,s.jsx)(l.I,{type:"number",value:null!==(r=null==y?void 0:y.maxExchangeNumber)&&void 0!==r?r:"",onChange:e=>{y&&N({...y,maxExchangeNumber:parseInt(e.target.value)})}})]}),(0,s.jsx)("div",{className:"h-10"}),(0,s.jsxs)("div",{className:"flex flex-row items-center justify-start space-x-2 ml-2",children:[(0,s.jsx)(c._,{children:"Targets"}),(0,s.jsx)(v.E,{tags:T,setTags:e=>C(e),activeTagIndex:null,setActiveTagIndex:()=>{}})]}),(0,s.jsxs)("div",{className:"flex flex-row items-center justify-start space-x-2 ml-2",children:[(0,s.jsx)(c._,{children:"VIP"}),(0,s.jsx)(a.X,{checked:null==y?void 0:y.isVip,onCheckedChange:e=>{y&&N({...y,isVip:!y.isVip})}})]})]}),(0,s.jsx)(i.ze,{children:(0,s.jsxs)("div",{className:"flex flex-row justify-start space-x-2",children:[(0,s.jsx)(i.uh,{onAbort:x,onClick:x,children:(0,s.jsx)(n.z,{variant:"outline",children:"Cancel"})}),(0,s.jsx)(n.z,{onClick:()=>{y&&(y.targets=T.map(e=>e.text),(o?p(y):b(y)).then(e=>{e?(S({title:"success"}),m()):S({title:"failed"})}))},children:"Save"})]})})]})})})}var y=function(){let[e,t]=(0,g.useState)(null),[r,a]=(0,g.useState)(!1),i=()=>{t(null),a(!0)};return(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold ml-5 mt-5 mb-5",children:"AI Chat"}),(0,s.jsx)("div",{className:"w-full flex-1 overflow-auto",children:(0,s.jsx)(b,{onClick:e=>{t(e),a(!0)}})}),(0,s.jsx)("div",{className:"flex flex-row w-full justify-end items-center pb-4 pr-4",children:(0,s.jsx)(n.z,{onClick:()=>i(),children:"Create"})}),(0,s.jsx)(j,{sceneId:e,visible:r,onClose:()=>{t(null),a(!1)}})]})}},89733:function(e,t,r){"use strict";r.d(t,{d:function(){return c},z:function(){return o}});var s=r(57437),n=r(2265),a=r(71538),i=r(12218),l=r(49354);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=n.forwardRef((e,t)=>{let{className:r,variant:n,size:i,asChild:o=!1,...d}=e,u=o?a.g7:"button";return(0,s.jsx)(u,{className:(0,l.cn)(c({variant:n,size:i,className:r})),ref:t,...d})});o.displayName="Button"},44541:function(e,t,r){"use strict";r.d(t,{X:function(){return c}});var s=r(57437),n=r(2265),a=r(69324),i=r(22468),l=r(49354);let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(a.fC,{ref:t,className:(0,l.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...n,children:(0,s.jsx)(a.z$,{className:(0,l.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(i.Z,{className:"h-4 w-4"})})})});c.displayName=a.fC.displayName},55555:function(e,t,r){"use strict";r.d(t,{OX:function(){return x},Qz:function(){return c},dy:function(){return l},iI:function(){return p},sc:function(){return f},u6:function(){return h},uh:function(){return d},ze:function(){return m}});var s=r(57437),n=r(2265),a=r(37213),i=r(49354);let l=e=>{let{shouldScaleBackground:t=!0,...r}=e;return(0,s.jsx)(a.d.Root,{shouldScaleBackground:t,...r})};l.displayName="Drawer";let c=a.d.Trigger,o=a.d.Portal,d=a.d.Close,u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(a.d.Overlay,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 ",r),...n})});u.displayName=a.d.Overlay.displayName;let f=n.forwardRef((e,t)=>{let{className:r,children:n,...l}=e;return(0,s.jsxs)(o,{children:[(0,s.jsx)(u,{}),(0,s.jsxs)(a.d.Content,{ref:t,className:(0,i.cn)("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",r),...l,children:[(0,s.jsx)("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),n]})]})});f.displayName="DrawerContent";let x=e=>{let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,i.cn)("grid gap-1.5 p-4 text-center sm:text-left",t),...r})};x.displayName="DrawerHeader";let m=e=>{let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,i.cn)("mt-auto flex flex-col gap-2 p-4",t),...r})};m.displayName="DrawerFooter";let p=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(a.d.Title,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",r),...n})});p.displayName=a.d.Title.displayName;let h=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(a.d.Description,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...n})});h.displayName=a.d.Description.displayName},77209:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var s=r(57437),n=r(2265),a=r(49354);let i=n.forwardRef((e,t)=>{let{className:r,type:n,...i}=e;return(0,s.jsx)("input",{type:n,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...i})});i.displayName="Input"},70402:function(e,t,r){"use strict";r.d(t,{_:function(){return o}});var s=r(57437),n=r(2265),a=r(38364),i=r(12218),l=r(49354);let c=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(a.f,{ref:t,className:(0,l.cn)(c(),r),...n})});o.displayName=a.f.displayName},47304:function(e,t,r){"use strict";r.d(t,{RM:function(){return c},SC:function(){return o},iA:function(){return i},pj:function(){return u},ss:function(){return d},xD:function(){return l}});var s=r(57437),n=r(2265),a=r(49354);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("table",{ref:t,className:(0,a.cn)("w-full caption-bottom text-sm",r),...n})});i.displayName="Table";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("thead",{ref:t,className:(0,a.cn)("[&_tr]:border-b",r),...n})});l.displayName="TableHeader";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,a.cn)("[&_tr:last-child]:border-0",r),...n})});c.displayName="TableBody",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("tfoot",{ref:t,className:(0,a.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...n})}).displayName="TableFooter";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("tr",{ref:t,className:(0,a.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...n})});o.displayName="TableRow";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("th",{ref:t,className:(0,a.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...n})});d.displayName="TableHead";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("td",{ref:t,className:(0,a.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...n})});u.displayName="TableCell",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("caption",{ref:t,className:(0,a.cn)("mt-4 text-sm text-muted-foreground",r),...n})}).displayName="TableCaption"},4919:function(e,t,r){"use strict";r.d(t,{g:function(){return i}});var s=r(57437),n=r(2265),a=r(49354);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("textarea",{className:(0,a.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...n})});i.displayName="Textarea"},78068:function(e,t,r){"use strict";r.d(t,{pm:function(){return f}});var s=r(2265);let n=0,a=new Map,i=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],o={toasts:[]};function d(e){o=l(o,e),c.forEach(e=>{e(o)})}function u(e){let{...t}=e,r=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=s.useState(o);return s.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},32693:function(e,t,r){"use strict";r.d(t,{R:function(){return s}});class s{}s.ACCOUNT="account",s.AUTH_TOKENS="auth_tokens"},49354:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var s=r(44839),n=r(96164);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,s.W)(t))}},66508:function(e,t,r){"use strict";r.d(t,{k:function(){return l}});var s=r(32693),n=r(42126);let a="https://api.langhance.com",i=n.Z.create({baseURL:a}),l=()=>{let e=JSON.parse(localStorage.getItem(s.R.AUTH_TOKENS));return n.Z.create({baseURL:a,headers:{Authorization:"Bearer ".concat(e.accessToken)}})};i.interceptors.request.use(function(e){return e}),i.interceptors.response.use(function(e){return e}),t.Z=i},38364:function(e,t,r){"use strict";r.d(t,{f:function(){return i}});var s=r(22988),n=r(2265),a=r(25171);let i=(0,n.forwardRef)((e,t)=>(0,n.createElement)(a.WV.label,(0,s.Z)({},e,{ref:t,onMouseDown:t=>{var r;null===(r=e.onMouseDown)||void 0===r||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault()}})))}},function(e){e.O(0,[850,373,216,984,721,971,23,744],function(){return e(e.s=65007)}),_N_E=e.O()}]);