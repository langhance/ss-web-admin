(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{65007:function(e,t,r){Promise.resolve().then(r.bind(r,58308))},58308:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return C}});var n=r(57437),s=r(2265),a=r(78030);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);var i=r(89733),c=e=>{let{onClick:t,children:r}=e;return(0,n.jsx)(i.z,{className:"bg-red-500 rounded-[10px] size-[40px] p-0 hover:bg-red-700",onClick:t,children:r||(0,n.jsx)(l,{className:"w-5 h-5 text-white",size:"24px"})})},o=r(44541),d=r(55555),u=r(77209),f=r(47304),x=r(4919),m=r(78068),h=r(66508);class p{async getAllScenes(){let e=(await (0,h.k)().get("/admin/v1/ai-chat/scenes")).data;if("success"!==e.status){console.error("Get scenes failed");return}return e.data}async getSceneById(e){let t=(await (0,h.k)().get("/admin/v1/ai-chat/scene",{params:{id:e}})).data;if("success"!==t.status){console.error("Get scene failed");return}return t.data}async createScene(e){let t={...e,id:void 0};return 200===(await (0,h.k)().post("/admin/v1/ai-chat/scene",t)).status||(console.error("Create scene failed"),!1)}async deleteScene(e){return 200===(await (0,h.k)().delete("/admin/v1/ai-chat/scene",{params:{id:e}})).status||(console.error("Delete scene failed"),!1)}async updateScene(e){return 200===(await (0,h.k)().put("/admin/v1/ai-chat/scene",e)).status||(console.error("Update scene failed"),!1)}}var b=r(39099);let g=new p,v=(0,b.Ue)(e=>({scenes:void 0,refreshScenes:async()=>{let t=await g.getAllScenes();t&&e({scenes:t})},getSceneById:async e=>await g.getSceneById(e),createScene:async e=>await g.createScene(e),deleteScene:async e=>await g.deleteScene(e),updateScene:async e=>await g.updateScene(e)}));var j=r(85212);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let y=(0,a.Z)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),N=(0,a.Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);function w(e){let{isVip:t}=e;return(0,n.jsx)("div",{children:t?(0,n.jsx)(y,{color:"green"}):(0,n.jsx)(N,{color:"red"})})}function S(e){let{label:t,children:r,className:s}=e;return(0,n.jsxs)("div",{className:s,children:[(0,n.jsx)("label",{className:"block text-sm font-bold text-gray-700",children:t}),r]})}function k(e){let{onClick:t=()=>{}}=e,r=v(e=>e.scenes),a=v(e=>e.refreshScenes),l=v(e=>e.deleteScene),i=e=>{confirm("Are you sure you want to delete this scene?")&&l(e).then(e=>{e&&a()})};return(0,s.useEffect)(()=>{r||a()},[]),(0,n.jsx)("div",{className:"flex flex-col w-full h-full",children:(0,n.jsxs)(f.iA,{children:[(0,n.jsx)(f.xD,{children:(0,n.jsxs)(f.SC,{children:[(0,n.jsx)(f.ss,{children:"ID"}),(0,n.jsx)(f.ss,{children:"title"}),(0,n.jsx)(f.ss,{children:"desc"}),(0,n.jsx)(f.ss,{children:"thumbnail"}),(0,n.jsx)(f.ss,{children:"vip"})]})}),(0,n.jsx)(f.RM,{children:null==r?void 0:r.map(e=>{var r;return(0,n.jsxs)(f.SC,{onClick:()=>t(e.id),children:[(0,n.jsx)(f.pj,{children:e.id}),(0,n.jsx)(f.pj,{children:(0,n.jsx)("b",{children:e.title})}),(0,n.jsx)(f.pj,{children:(0,n.jsx)("i",{children:e.description})}),(0,n.jsx)(f.pj,{children:e.thumbnailUrl&&(0,n.jsx)("img",{src:e.thumbnailUrl,alt:"thumbnail",className:"w-[50px] h-[90px] object-cover rounded-[10px]"})}),(0,n.jsx)(f.pj,{children:(0,n.jsx)(w,{isVip:null!==(r=e.isVip)&&void 0!==r&&r})}),(0,n.jsx)(f.pj,{children:(0,n.jsx)(c,{onClick:t=>{t.stopPropagation(),i(e.id)}})})]},e.id)})})]})})}function T(e){var t,r;let{sceneId:a,visible:l=!1,onClose:c=()=>{}}=e,f=v(e=>e.refreshScenes),h=v(e=>e.updateScene),p=v(e=>e.createScene),b={id:0,languageId:1,title:"",description:void 0,difficultPercentLevel:void 0,thumbnailUrl:void 0,systemPrompt:void 0,isVip:void 0,maxExchangeNumber:void 0},[g,y]=(0,s.useState)(null),N=v(e=>e.getSceneById),{toast:w}=(0,m.pm)(),[k,T]=(0,s.useState)([]),C=()=>{y(null),T([])};return(0,s.useEffect)(()=>{a?N(a).then(e=>{if(e){var t;y(e),T((null!==(t=e.targets)&&void 0!==t?t:[]).map(e=>({text:e})))}}):(C(),y({...b}))},[a]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(d.dy,{open:l,onClose:c,dismissible:!1,children:(0,n.jsxs)(d.sc,{className:"h-full",children:[(0,n.jsxs)(d.OX,{children:[(0,n.jsxs)(d.iI,{children:["You're ",a?"Updating AI-Chat":"Creating a new AI-Chat"," ","Scene ",a&&"with id ".concat(a)]}),(0,n.jsx)(d.u6,{children:"You can update the scene here"})]}),(0,n.jsxs)("div",{className:"flex flex-col overflow-auto space-y-4 mt-2 px-4 flex-1",children:[(0,n.jsx)(S,{label:"Title",children:(0,n.jsx)(u.I,{type:"text",value:null==g?void 0:g.title,onChange:e=>{g&&y({...g,title:e.target.value})}})}),(0,n.jsx)(S,{label:"Description",children:(0,n.jsx)(u.I,{type:"text",value:null==g?void 0:g.description,onChange:e=>{g&&y({...g,description:e.target.value})}})}),(0,n.jsx)(S,{label:"Thumbnail URL",children:(0,n.jsx)(u.I,{type:"text",value:null==g?void 0:g.thumbnailUrl,onChange:e=>{g&&y({...g,thumbnailUrl:e.target.value})}})}),(0,n.jsx)(S,{label:"System Prompt",children:(0,n.jsx)(x.g,{className:"h-[200px] px-4 py-2",value:null==g?void 0:g.systemPrompt,onChange:e=>{g&&y({...g,systemPrompt:e.target.value})}})}),(0,n.jsx)("div",{className:"h-10"}),(0,n.jsx)(S,{label:"Difficult Percent Level",children:(0,n.jsx)(u.I,{type:"number",value:null!==(t=null==g?void 0:g.difficultPercentLevel)&&void 0!==t?t:0,onChange:e=>{g&&y({...g,difficultPercentLevel:parseFloat(e.target.value)})}})}),(0,n.jsx)(S,{label:"Max Exchange Number",children:(0,n.jsx)(u.I,{type:"number",value:null!==(r=null==g?void 0:g.maxExchangeNumber)&&void 0!==r?r:"",onChange:e=>{g&&y({...g,maxExchangeNumber:parseInt(e.target.value)})}})}),(0,n.jsx)("div",{className:"h-10"}),(0,n.jsx)(S,{label:"Target Tags",children:(0,n.jsx)(j.E,{tags:k,setTags:e=>T(e),activeTagIndex:null,setActiveTagIndex:()=>{}})}),(0,n.jsx)(S,{label:"VIP",className:"flex flex-row items-center justify-start space-x-2",children:(0,n.jsx)(o.X,{checked:null==g?void 0:g.isVip,onCheckedChange:e=>{g&&y({...g,isVip:!g.isVip})}})})]}),(0,n.jsx)(d.ze,{children:(0,n.jsxs)("div",{className:"flex flex-row justify-start space-x-2",children:[(0,n.jsx)(d.uh,{onAbort:c,onClick:c,children:(0,n.jsx)(i.z,{variant:"outline",children:"Cancel"})}),(0,n.jsx)(i.z,{onClick:()=>{g&&(g.targets=k.map(e=>e.text),(a?h(g):p(g)).then(e=>{e?(w({title:"success"}),f()):w({title:"failed"})}))},children:"Save"})]})})]})})})}var C=function(){let[e,t]=(0,s.useState)(null),[r,a]=(0,s.useState)(!1),l=()=>{t(null),a(!0)};return(0,n.jsxs)("div",{className:"flex flex-col h-full",children:[(0,n.jsxs)("div",{className:"flex flex-row w-full justify-between items-center",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold ml-5 mt-5 mb-5",children:"AI Chat"}),(0,n.jsx)(i.z,{className:"me-[40px]",onClick:()=>l(),children:"Create"})]}),(0,n.jsx)("div",{className:"w-full flex-1 overflow-auto",children:(0,n.jsx)(k,{onClick:e=>{t(e),a(!0)}})}),(0,n.jsx)(T,{sceneId:e,visible:r,onClose:()=>{t(null),a(!1)}})]})}},89733:function(e,t,r){"use strict";r.d(t,{z:function(){return o}});var n=r(57437),s=r(2265),a=r(71538),l=r(12218),i=r(49354);let c=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,t)=>{let{className:r,variant:s,size:l,asChild:o=!1,...d}=e,u=o?a.g7:"button";return(0,n.jsx)(u,{className:(0,i.cn)(c({variant:s,size:l,className:r})),ref:t,...d})});o.displayName="Button"},44541:function(e,t,r){"use strict";r.d(t,{X:function(){return c}});var n=r(57437),s=r(2265),a=r(69324),l=r(22468),i=r(49354);let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.fC,{ref:t,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...s,children:(0,n.jsx)(a.z$,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,n.jsx)(l.Z,{className:"h-4 w-4"})})})});c.displayName=a.fC.displayName},55555:function(e,t,r){"use strict";r.d(t,{OX:function(){return x},Qz:function(){return c},dy:function(){return i},iI:function(){return h},sc:function(){return f},u6:function(){return p},uh:function(){return d},ze:function(){return m}});var n=r(57437),s=r(2265),a=r(37213),l=r(49354);let i=e=>{let{shouldScaleBackground:t=!0,...r}=e;return(0,n.jsx)(a.d.Root,{shouldScaleBackground:t,...r})};i.displayName="Drawer";let c=a.d.Trigger,o=a.d.Portal,d=a.d.Close,u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.d.Overlay,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80 ",r),...s})});u.displayName=a.d.Overlay.displayName;let f=s.forwardRef((e,t)=>{let{className:r,children:s,...i}=e;return(0,n.jsxs)(o,{children:[(0,n.jsx)(u,{}),(0,n.jsxs)(a.d.Content,{ref:t,className:(0,l.cn)("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",r),...i,children:[(0,n.jsx)("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),s]})]})});f.displayName="DrawerContent";let x=e=>{let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,l.cn)("grid gap-1.5 p-4 text-center sm:text-left",t),...r})};x.displayName="DrawerHeader";let m=e=>{let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,l.cn)("mt-auto flex flex-col gap-2 p-4",t),...r})};m.displayName="DrawerFooter";let h=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.d.Title,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",r),...s})});h.displayName=a.d.Title.displayName;let p=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.d.Description,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...s})});p.displayName=a.d.Description.displayName},77209:function(e,t,r){"use strict";r.d(t,{I:function(){return l}});var n=r(57437),s=r(2265),a=r(49354);let l=s.forwardRef((e,t)=>{let{className:r,type:s,...l}=e;return(0,n.jsx)("input",{type:s,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...l})});l.displayName="Input"},47304:function(e,t,r){"use strict";r.d(t,{RM:function(){return c},SC:function(){return o},iA:function(){return l},pj:function(){return u},ss:function(){return d},xD:function(){return i}});var n=r(57437),s=r(2265),a=r(49354);let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("table",{ref:t,className:(0,a.cn)("w-full caption-bottom text-sm",r),...s})});l.displayName="Table";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("thead",{ref:t,className:(0,a.cn)("[&_tr]:border-b",r),...s})});i.displayName="TableHeader";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("tbody",{ref:t,className:(0,a.cn)("[&_tr:last-child]:border-0",r),...s})});c.displayName="TableBody",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("tfoot",{ref:t,className:(0,a.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...s})}).displayName="TableFooter";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("tr",{ref:t,className:(0,a.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...s})});o.displayName="TableRow";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("th",{ref:t,className:(0,a.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...s})});d.displayName="TableHead";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("td",{ref:t,className:(0,a.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...s})});u.displayName="TableCell",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("caption",{ref:t,className:(0,a.cn)("mt-4 text-sm text-muted-foreground",r),...s})}).displayName="TableCaption"},4919:function(e,t,r){"use strict";r.d(t,{g:function(){return l}});var n=r(57437),s=r(2265),a=r(49354);let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("textarea",{className:(0,a.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...s})});l.displayName="Textarea"},78068:function(e,t,r){"use strict";r.d(t,{pm:function(){return f}});var n=r(2265);let s=0,a=new Map,l=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?l(r):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],o={toasts:[]};function d(e){o=i(o,e),c.forEach(e=>{e(o)})}function u(e){let{...t}=e,r=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),n=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||n()}}}),{id:r,dismiss:n,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=n.useState(o);return n.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},32693:function(e,t,r){"use strict";r.d(t,{R:function(){return n}});class n{}n.ACCOUNT="account",n.AUTH_TOKENS="auth_tokens"},49354:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var n=r(44839),s=r(96164);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,n.W)(t))}},66508:function(e,t,r){"use strict";r.d(t,{k:function(){return i}});var n=r(32693),s=r(42126);let a="https://api.langhance.com",l=s.Z.create({baseURL:a}),i=()=>{let e=JSON.parse(localStorage.getItem(n.R.AUTH_TOKENS));return s.Z.create({baseURL:a,headers:{Authorization:"Bearer ".concat(e.accessToken)}})};l.interceptors.request.use(function(e){return e}),l.interceptors.response.use(function(e){return e}),t.Z=l}},function(e){e.O(0,[850,373,984,721,971,23,744],function(){return e(e.s=65007)}),_N_E=e.O()}]);